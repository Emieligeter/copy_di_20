<!DOCTYPE html>
<html>
<head window.onload = "checkout()">
<meta charset="UTF-8">
<title>Online Book Store - Checkout</title>

<script>
	window.onload = checkout;
	function checkout() {
		let xmlhttp = new XMLHttpRequest();
		xmlhttp.onreadystatechange = function () {
			if (this.readyState === 4 && this.status === 200) {
				let returnObj = JSON.parse(this.responseText);
				let table = "<table>";

				table += "<tr>" +
							"<th>ID</th>" +
							"<th>Short Description</th>" +
							"<th>Long Description</th>" +
							"<th>Cost</th>" +
							"<th>Amount</th>" +
						"</tr>";

				for (let it of returnObj) {
					let product = it['item'];
					table += "<tr>" +
								"<td>" + product['itemID'] + "</td>" +
								"<td>" + product['shortDescription'] + "</td>" +
								"<td>" + product['longDescription'] + "</td>" +
								"<td>" + product['cost'] + "</td>" +
								"<td>" + it['numItems'] + "</td>" +
							"</tr>";
				}

				table += "</table>";

				document.getElementById("items").innerHTML = table;
			}
		}
		xmlhttp.open("GET", "http://localhost:8080/onlineStore/rest/cart", true);
		xmlhttp.send();
	}
</script>


</head>

<body>
<H1>Cost statements </H1>

	<div id="results">
		<h2>Bought items</h2>
		<div id="items">
		</div>
	</div>

</body>
</html>