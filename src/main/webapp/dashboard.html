<!DOCTYPE HTML>

<html lang=”en”>
<head>
<title>SUMO Dashboard</title>
<meta charset="UTF-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<!-- Bootstrap CSS -->
<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
	integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
	crossorigin="anonymous">
<link rel="stylesheet" type="text/css"
	href="http://www.shieldui.com/shared/components/latest/css/light/all.min.css" />
</head>

<body>
	<div class="container">
		<div class="row">
			<div id=elementButtons class="col">
				<button id="LineGraph" onclick="setChartType('line')">Line Graph</button> 
				<button id="ScatterPlot" onclick="setChartType('scatter')">Scatter Plot</button> 
				<button id="BarChart" onclick="setChartType('bar')">Bar Chart</button>
				<button id="PieChart" onclick="setChartType('pie')">Pie Chart</button> 
				<button id="Title">Title</button> 
				 
				<button id="addToReport" onclick="chartToReport()">Add chart to report</button>
				<br>
			</div>
		</div>
		<div class="row">
			<div id="fileSelect" class="col">
				<button id=toSimList onclick="location.href='simList.html'">Edit Files</button>
				<p>this is where we have a list of files</p>
			</div>
			<div id="chart" class="col">
				<canvas id="myChart"></canvas>
			</div>
			<div id="varSelect" class="col">
				<p>we select variables here</p>
			</div>
		</div>
		<div class="row">
			<div id="report" class="col">
			<h3>Preliminary report</h3>
			</div>
		</div>
	</div>


		<script
			src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script>
		<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
			integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
			crossorigin="anonymous"></script>
		<script
			src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
			integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
			crossorigin="anonymous"></script>
		<script
			src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
			integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
			crossorigin="anonymous"></script>
		<script type="text/javascript" src="htmlFunctions.js"></script>
		
		
		
		<script>
		function chartToReport() {
			console.log("lets add this chart to the report.")
			var chart = copyCanvas(document.getElementById('myChart'));
			document.getElementById('report').appendChild(chart);
			console.log("done.")
		}
		
		function copyCanvas(original) {
			var newThing = document.createElement('canvas');
			var cxt = newThing.getContext('2d');
			newThing.width = original.width;
			newThing.height = original.height;
			cxt.drawImage(original, 0, 0);
			return newThing;
		}
		
		var chartType = "line";
		function setChartType(type) {
			chartType = type;
			console.log("Set chartType to " + type + chartType);
			updateChart();
		}
		
		function updateChart() {
			console.log("We're going to update the chart to type " + chartType);
			var ctx = document.getElementById('myChart').getContext('2d');
			var chart = new Chart(ctx, {
				// The type of chart we want to create
				type : chartType,

				// The data for our dataset
				data : {
					labels : [ "January", "February", "March", "April", "May",
							"June", "July" ],
					datasets : [ {
						label : "My First dataset",
						backgroundColor : getColors(7),
						borderColor : 'rgb(99, 99, 132)',
						data : [ 0, 10, 5, 2, 20, 30, 45 ],
						
					} ]
				},

				// Configuration options go here
				options : {}
			});
			console.log("done.");
		}
		
		/*https://stackoverflow.com/questions/28828915/how-set-color-family-to-pie-chart-in-chart-js*/
		function getColors(length){
		    let pallet = ["#0074D9", "#FF4136", "#2ECC40", "#FF851B", "#7FDBFF", "#B10DC9", "#FFDC00", "#001f3f", "#39CCCC", "#01FF70", "#85144b", "#F012BE", "#3D9970", "#111111", "#AAAAAA"];
		    let colors = [];

		    for(let i = 0; i < length; i++) {
		      colors.push(pallet[i % pallet.length]);
		    }

		    return colors;
		  }
		</script>
</body>